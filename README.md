TODOs:

* Always use cached chips for parser - can merge parse and parseAndCacheLibraryPart
* Use of @before where possible